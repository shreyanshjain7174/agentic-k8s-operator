{{- if not .Values.license.key }}
  {{- fail "A license key is required. Set license.key in values.yaml or pass --set license.key=<YOUR_KEY>" }}
{{- end }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "agentic-operator.fullname" . }}-license
  namespace: {{ include "agentic-operator.namespace" . }}
  labels:
    {{- include "agentic-operator.labels" . | nindent 4 }}
    app.kubernetes.io/component: license
  annotations:
    helm.sh/resource-policy: keep
type: Opaque
stringData:
  license.key: {{ .Values.license.key | quote }}
  license.publicKey: {{ .Values.license.publicKey | quote }}
  seats: {{ .Values.license.seats | default 1 | toString | quote }}
  tier: {{ .Values.license.tier | default "trial" | quote }}
